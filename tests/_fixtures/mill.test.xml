<?xml version="1.0" encoding="UTF-8"?>
<mill
    name="Mill unit test API, Showtimes"
    bootstrap="vendor/autoload.php"
>
    <info>
        <description>This is an example API for the purposes of showing how Mill works.</description>

        <terms url="https://example.com/terms" />

        <contact
            name="Get help!"
            email="support@example.com"
            url="https://developer.example.com/help" />

        <externalDocs>
            <externalDoc name="Developer Docs" url="https://developer.example.com" />
        </externalDocs>
    </info>

    <servers>
        <server environment="prod" url="https://api.example.com" description="Production" />
        <server environment="dev" url="https://api.example.local" description="Development" />
    </servers>

    <versions>
        <version name="1.0" releaseDate="2017-01-01" />
        <version name="1.1" releaseDate="2017-02-01" />
        <version name="1.1.1" releaseDate="2017-03-01" />
        <version name="1.1.2" releaseDate="2017-04-01" default="true" />
        <version name="1.1.3" releaseDate="2017-05-27">
            Changed up the responses for `/movie/{id}`, `/movies/{id}` and `/movies`.
        </version>
    </versions>

    <compilers>
        <excludes>
            <!-- This is here just for code coverage purposes, and to verify that we're able to exclude resource
                groups when loading a config XML file. -->
            <exclude group="FakeExcludeGroup" />
        </excludes>
    </compilers>

    <controllers>
        <filter>
            <directory name="examples/Showtimes/Controllers/" suffix=".php" />

            <excludes>
                <!-- This is here just for code coverage purposes, and to verify that we're able to exclude controllers
                    when loading a config XML file. -->
                <exclude name="\IAmNotARealClass" />
            </excludes>
        </filter>
    </controllers>

    <representations>
        <filter>
            <directory name="examples/Showtimes/Representations/" method="create" suffix=".php"  />
            <class name="\Mill\Examples\Showtimes\Representations\Movie" method="create" />

            <!--excludes>
                <exclude name="\Mill\Examples\Showtimes\Representations\Error" />
                <exclude name="\Mill\Examples\Showtimes\Representations\CodedError" />
                <exclude name="\Mill\Examples\Showtimes\Representations\Representation" />
            </excludes-->
        </filter>

        <errors>
            <class name="\Mill\Examples\Showtimes\Representations\Error" method="create" needsErrorCode="false" />
            <class name="\Mill\Examples\Showtimes\Representations\CodedError" method="create" needsErrorCode="true" />
        </errors>
    </representations>

    <authentication>
        <flows>
            <bearer format="bearer" />

            <oauth2>
                <authorizationCode url="/oauth/authorize" tokenUrl="/oauth/access_token" />
                <clientCredentials url="/oauth/authorize/client" />
            </oauth2>
        </flows>

        <scopes>
            <scope name="create" description="Create" />
            <scope name="delete" description="Delete" />
            <scope name="edit" description="Edit" />
            <scope name="public" description="Public" />
        </scopes>
    </authentication>

    <parameterTokens>
        <token name="page">page (integer, optional) - The page number to show.</token>
        <token name="per_page">per_page (integer, optional) - Number of items to show on each page. Max 100.</token>
        <token name="filter">filter (enum, optional) - Filter to apply to the results.</token>
    </parameterTokens>

    <pathParams>
        <translations>
            <translation from="movie_id" to="id" />
            <translation from="theater_id" to="id" />
        </translations>
    </pathParams>

    <tags>
        <tag name="Movies">These resources help you handle movies.</tag>
        <tag name="Movies\Coming Soon" />
        <tag name="Theaters" />
    </tags>

    <vendorTags>
        <vendorTag name="tag:BUY_TICKETS" />
        <vendorTag name="tag:DELETE_CONTENT" />
        <vendorTag name="tag:FEATURE_FLAG" />
        <vendorTag name="tag:MOVIE_RATINGS" />
    </vendorTags>
</mill>
